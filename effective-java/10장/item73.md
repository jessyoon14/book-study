# 73. 추상화 수준에 맞는 예외를 던지라

### 저수준 예외를 내보내면 어떤 문제가 있을까?

- 내가 하려는 것과 관련 없어보이는 예외가 나오면 당황스럽다
- 저수준 예외는 내부 구현 방식을 드러내서 윗 레벨 API를 오염시킨다
- 구현 방식이 바뀌면 예외가 바뀌어 기존 클라이언트를 깨지게 한다

### 해결 방법: 예외 번역

예외 번역: 상위 계층에서는 저수준 예외를 잡아 자신의 추상화 수준에 맞는 예외로 바꿔 던져야 한다

```java
try {
	...
} catch (LowLevelException e) {
	throw new HigherLevelException(..);
}
```

예외 연쇄 (Exception chaining): 문제의 근본 원인인 저수준 예외를 고수준 예외에 싫어 보내기

```java
try {
	...
} catch (LowLevelException cause) {
	throw new HigherLevelException(cause);
}
```

### 주의

무턱대고 예외를 전파하는 것보다 예외 번역이 낫지만, 그래도 남용하지 말자

- 베스트: 저수준 메서드가 반드시 성공해서 아래 계층에서 예외가 발생하지 않도록
    - ex. 메서드에 건내기 전에 매개변수 값을 검사
- 차선책: 아래 계층의 예외를 피할 수 없다면 상위 계층에서 조용히 처리해서 문제를 API 호출자까지 전파하지 말기
    - 클라이언트 코드나 사용자에게 문제를 전파하지 않음
    - 예외는 로깅해서 프로그래머가 조치할 수 있도록 기록